<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Melfa Robot Kontrol Paneli</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://kit.fontawesome.com/a2d9d6a05d.js" crossorigin="anonymous"></script>
</head>
<body class="light-mode">

<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4" style="height: 50px;">
    <div class="container-fluid px-0 h-100"> <!-- ุฅุฒุงูุฉ ุงูุญุดูุฉ ุงูุฌุงูุจูุฉ -->
        <img src="{{ url_for('static', filename='img/logo-placeholder.png') }}" style="width: 400px; height: 50px;" alt="Logo">
        <span class="navbar-brand ms-2">MELFA Robot Control</span>
        <div class="d-flex align-items-center">
            <div id="status-indicator" class="badge bg-secondary me-3" data-i18n="not_connected">Baฤlantฤฑ yok</div>
            <span id="servo-indicator" class="badge bg-secondary ms-2">Servo: ?</span>
            <span id="control-indicator" class="badge bg-secondary ms-2">Control: ?</span>
            <span id="run-indicator" class="badge bg-secondary ms-2">RUN ?</span>
            <select id="language-select" class="form-select form-select-sm me-3">
                <option value="tr">Tรผrkรงe</option>
                <option value="en">English</option>
                <option value="ar">ุงูุนุฑุจูุฉ</option>
            </select>
            <button id="theme-toggle" class="btn btn-outline-light btn-sm"><i class="fas fa-moon"></i></button>
        </div>
    </div>
</nav>

<div class="container">
    <!-- ุงููุงููุฑุง + ุงูุชุญูู ุงูุฑุฆูุณู ูู ุตู ูุงุญุฏ -->
    <div class="row g-4 mt-4">
        <!-- ุงููุงููุฑุง -->
        <div class="col-lg-6">
            <div class="card shadow" style="width: 100%; height: 550px;">
                <div class="card-body">
                    <h5 class="card-title" data-i18n="camera">๐ธ Kamera</h5>
                    <img src="{{ url_for('video_feed') }}" class="img-fluid rounded" alt="Camera Feed">
                </div>
            </div>
        </div>

        <!-- ุงูุชุญูู ุงูุฑุฆูุณู -->
        <div class="col-lg-3">
            <div class="card shadow">
                <div class="card-body">
                    <h5 class="card-title" data-i18n="controls">Kontroller</h5>
                    <div class="d-grid gap-3">
                        <button class="btn btn-success" onclick="connectRobot()" data-i18n="connect">Baฤlantฤฑ Aรง</button>
                        <button class="btn btn-danger" onclick="disconnectRobot()" data-i18n="disconnect">Baฤlantฤฑ Kapat</button>
                        <button class="btn btn-success" onclick="sendCommand('1;1;CNTLON')" data-i18n="controller_on">Controller ON</button>
                        <button class="btn btn-danger" onclick="sendCntlOff()">๐ CNTLOFF</button>
                        <button class="btn btn-success" onclick="sendCommand('1;1;SRVON')" data-i18n="servo_on">Servo ON</button>
                        <button class="btn btn-danger" onclick="sendCommand('1;1;SRVOFF')" data-i18n="servo_off">Servo OFF</button>
                        <button class="btn btn-secondary" onclick="resetRobot()" data-i18n="reset">Reset</button>
                        <button class="btn btn-warning" onclick="sendCommand('1;1;STOP')" data-i18n="stop">Durdur</button>
                        <button class="btn btn-dark" onclick="emergencyStop()" data-i18n="emergency_stop">Acil Dur</button>
                    </div>
                </div>
            </div>
        </div>
         <!-- ุนุฑุถ ุงูุฑุฏูุฏ ูู ุงูุฑูุจูุช ๐ฅ -->
        
        <div class="col g-4 mt-4">
            <div class="col-lg-12">
                <div class="card shadow" style="width: 100%; height: 550px;">
                    <div class="card-body">
                        <h5 class="card-title" data-i18n="robot_response">๐ฅ Robot Yanฤฑtฤฑ:</h5>
                        <pre id="robot-response" class="border rounded p-1 bg-light" style="height: 350px; overflow-y: auto; white-space: pre-wrap; word-wrap: break-word;"></pre>
                         <div class="d-flex gap-2 mt-3 flex-wrap">
                        <button class="btn btn-outline-danger btn-sm" onclick="readLastError()">๐ ูุฑุงุกุฉ ุงูุฎุทุฃ (ERROR)</button>
                        <button class="btn btn-outline-info btn-sm" onclick="sendErrorMessage()">๐ฉ ุฅุฑุณุงู ุฑุณุงูุฉ ุงูุฎุทุฃ (ERRORMES)</button>
                        </div>
                    </div>
                   
                </div>
            </div>
        </div>    
    
    </div>


    <!-- ูุฑุช ุฅุฏุงุฑุฉ ุงูุจุฑุงูุฌ -->
    <div class="row g-4 mt-4">
    <div class="col-lg-12">
        <div class="card shadow">
        <div class="card-body">
            <h5 class="card-title" data-i18n="program_manager">๐๏ธ ุฅุฏุงุฑุฉ ุงูุจุฑุงูุฌ</h5>

            <!-- ุฃุฒุฑุงุฑ ุชุญููู ูุงุณุชุฏุนุงุก ุงูุจุฑุงูุฌ -->
            <div class="d-flex flex-wrap gap-2 mb-3 align-items-center">
             <!-- ุฒุฑ PRGRD -->
            <button class="btn btn-outline-dark btn-sm" onclick="fetchPrograms('PRGRD')">
                ๐ PRGRD - ูุฑุงุกุฉ ุงูุจุฑูุงูุฌ
            </button>
                <!-- ุฒุฑ ุงุณุชุฏุนุงุก ุงูุจุฑุงูุฌ -->
            <button class="btn btn-outline-primary btn-sm" onclick="fetchPrograms('PRGUP')">
                ๐ PRGUP - ุงูุธุฑ ููุจุฑุงูุฌ
            </button>

            <!-- ุฅุฏุฎุงู ุฑูู ุงูุจุฑูุงูุฌ ูุชุญููู -->
            <div class="input-group" style="max-width: 300px;">
                <input type="text" class="form-control form-control-sm" id="load-program-id" placeholder="ูุซุงู: 333">
                <button class="btn btn-outline-secondary btn-sm" onclick="fetchPrograms('LOAD')">
                ๐ฅ PRGLOAD - ุชุญููู ุจุฑูุงูุฌ
                </button>
            </div>

            <!-- ุฒุฑ SLOTINIT -->
            <button class="btn btn-outline-warning btn-sm" onclick="fetchPrograms('SLOTINIT')">
                ๐ง SLOTINIT - ุชููุฆุฉ ุงูุจุฑูุงูุฌ
            </button>

          
            </div>

            <!-- ูุงุฆูุฉ ุงูุจุฑุงูุฌ -->
            <label class="form-label" data-i18n="available_programs">๐ ุงูุจุฑุงูุฌ ุงููุชููุฑุฉ:</label>
            <textarea class="form-control mb-3" id="program-list" rows="2" readonly style="white-space: pre-wrap;"></textarea>

            <!-- ุชุดุบูู ุงูุจุฑูุงูุฌ -->
            <label class="form-label" data-i18n="run_program_name">๐ ุฃุฏุฎู ุงุณู ุงูุจุฑูุงูุฌ ูุชุดุบููู:</label>
            <div class="input-group">
            <input type="text" class="form-control" id="program-name" placeholder="ูุซุงู: test">
            <button class="btn btn-success" onclick="runProgram()" data-i18n="run">ุชุดุบูู</button>
            <button class="btn btn-warning" onclick="sendCommand('1;1;STOP')" data-i18n="stop">Durdur</button>
            <!-- ุฒุฑ ุฅุนุงุฏุฉ ุชุนููู ุงูุจุฑูุงูุฌ -->
            <button class="btn btn-danger" onclick="resetProgram()">๐๏ธ ุฅุนุงุฏุฉ ุชุนููู ุงูุจุฑูุงูุฌ </button>
            <button class="btn btn-secondary" onclick="resetRobot()" data-i18n="reset">Reset</button>
            </div>

        </div>
        </div>
    </div>
    </div>

    <!-- ูุฑุช ุฅูุดุงุก ุจุฑูุงูุฌ ุฌุฏูุฏ -->
    <div class="row g-4 mt-4">
    <div class="col-lg-12">
        <div class="card shadow">
        <div class="card-body">
            <h5 class="card-title">๐๏ธ ุฅูุดุงุก ุจุฑูุงูุฌ MELFA</h5>
            <label class="form-label">ุงุณู ุงูุจุฑูุงูุฌ:</label>

            <div class="input-group">
            <input type="text" id="new-program-name" class="form-control" placeholder="ูุซุงู: program1">
            <button class="btn btn-outline-success" onclick="createNewProgram()">๐ LOAD</button>
            <button class="btn btn-outline-primary" onclick="listProgramSlots()">๐ List Slots (LISTL)</button>
            <!-- ุฒุฑ ุญูุธ ุงูุจุฑูุงูุฌ -->
            <button class="btn btn-outline-success" onclick="saveProgram()">๐พ ุญูุธ ุงูุจุฑูุงูุฌ (SAVE)</button>
            <button class="btn btn-outline-info" onclick="sendListP('-1')">๐ LISTP - ุงูุณุงุจู</button>
            <button class="btn btn-outline-info" onclick="sendListP('+1')">๐ LISTP + ุงูุชุงูู</button>
            </div>
            <div class="mb-3">
            <!-- ูุฑุจุน ุนุฑุถ ุงูุฑุฏูุฏ ุงูุฎุงุตุฉ ุจุงููุฑุช -->
            <pre id="melfa-create-response" class="border rounded p-2 bg-light mt-3" style="white-space: pre-wrap; overflow-y: auto; height: 200px;"></pre>
            </div>
        </div>
        </div>
    </div>
    </div>


    <!-- ูุฑุจุน ูุชุงุจุฉ ุฃููุงุฏ MELFA BASIC -->
    <div class="row g-4 mt-4">
        <div class="col-lg-8"> 
            <div class="card shadow">
                <div class="card-body">
                    <h5 class="card-title" data-i18n="melfa_editor">โ๏ธ MELFA BASIC IV Editรถrรผ</h5>
                    <textarea id="melfa-code" class="form-control" rows="4" placeholder="......."></textarea>
                    <button class="btn btn-primary mt-3" onclick="sendMelfaCode()">Kod yรผrรผtme</button>
                </div>
            </div>
        </div>

        <!-- ุงุฎุชูุงุฑ ุงูุณุฑุนุฉ -->
        <div class="col-lg-4">
            <div class="col-lg-12">
                <div class="card shadow">
                    <div class="card-body">
                        <h5 class="card-title" data-i18n="speed_select">Hฤฑz Seรงimi </h5>
                        <select id="speed-select" class="form-select">
                            <option value="10" data-i18n="speed_slow_10">รok Yavaล (10%)</option>
                            <option value="20" data-i18n="speed_slow_20">Yavaล Hareket (20%)</option>
                            <option value="50" data-i18n="speed_medium_50">Orta Hฤฑz (50%)</option>
                            <option value="75" data-i18n="speed_medium_75">Hฤฑzlฤฑ Tepki(75%)</option>
                            <option value="100" data-i18n="speed_fast_100">Maksimum Hฤฑz (100%)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ุฃุฒุฑุงุฑ ุงูุญุฑูุฉ -->
      <div class="row g-4 mt-6">
        <div class="col-lg-8"> 
            <div class="card shadow">
                <div class="card-body">
                    <div class="row g-5 text-center mt-8">
                        <h5 class="card-title mb-2" data-i18n="movement">Hareket Kontrolรผ / Movement Control</h5>

                        <div class="col-4">
                            <button class="btn btn-outline-primary move-btn" onmousedown="startMove('JOG00;00;01;00;00')" onmouseup="stopMove()" onmouseleave="stopMove()">โก๏ธ Saฤ</button>
                        </div>
                        <div class="col-4">
                            <button class="btn btn-outline-primary move-btn" onmousedown="startMove('JOG00;00;02;00;00')" onmouseup="stopMove()" onmouseleave="stopMove()">๐ผ Yukarฤฑ</button>
                        </div>
                        <div class="col-4">
                            <button class="btn btn-outline-primary move-btn" onmousedown="startMove('JOG00;00;00;01;00')" onmouseup="stopMove()" onmouseleave="stopMove()">โฌ๏ธ Sol</button>
                        </div>
                        <div class="col-4">
                            <button class="btn btn-outline-primary move-btn" onmousedown="startMove('JOG00;00;04;00;00')" onmouseup="stopMove()" onmouseleave="stopMove()">โฌ๏ธ Geri</button>
                        </div>
                        <div class="col-4">
                            <button class="btn btn-outline-success move-btn" onmousedown="startMove('JOG00;00;00;02;00')" onmouseup="stopMove()" onmouseleave="stopMove()">๐ฝ Aลaฤฤฑ</button>
                        </div>
                        <div class="col-4">
                            <button class="btn btn-outline-success move-btn" onmousedown="startMove('JOG00;00;00;04;00')" onmouseup="stopMove()" onmouseleave="stopMove()">โฌ๏ธ ฤฐleri</button>
                        </div>
                        <div class="col-4">
                            <button class="btn btn-outline-warning move-btn" onmousedown="startMove('JOG00;00;10;00;00')" onmouseup="stopMove()" onmouseleave="stopMove()">๐ผ Baล Yukarฤฑ</button>
                        </div>
                        <div class="col-4">
                            <button class="btn btn-outline-warning move-btn" onmousedown="startMove('JOG00;00;00;10;00')" onmouseup="stopMove()" onmouseleave="stopMove()">๐ฝ Baล  Aลaฤฤฑ</button>
                        </div>
                        <div class="col-4">
                            <button class="btn btn-outline-warning move-btn" onmousedown="startMove('JOG00;00;00;20;00')" onmouseup="stopMove()" onmouseleave="stopMove()">โป Baล Saฤ</button>
                        </div>
                        <div class="col-4">
                            <button class="btn btn-outline-warning move-btn" onmousedown="startMove('JOG00;00;20;00;00')" onmouseup="stopMove()" onmouseleave="stopMove()">โบ Baล Sol</button>
                        </div>
                        <div class="col-4">
                            <button class="btn btn-outline-danger move-btn" onmousedown="startMove('HNDON1')" onmouseup="stopMove()" onmouseleave="stopMove()">๐ค Aรง Kฤฑskaรง</button>
                        </div>
                        <div class="col-4">
                            <button class="btn btn-outline-danger move-btn" onmousedown="startMove('HNDOFF1')" onmouseup="stopMove()" onmouseleave="stopMove()">๐ค Kapat Kฤฑskaรง</button>
                        </div>
                    </div>
             </div> 
        </div>
    </div>
    
        <!-- ุนุฑุถ ุงูุฅุญุฏุงุซูุงุช ๐ -->
    <div class="row g-4 mt-4">
        <div class="col-lg-12">
            <div class="card shadow">
                <div class="card-body">
                    <h5 class="card-title" data-i18n="coordinates">๐ Koordinatlar:</h5>
                    <div class="input-group">
                        <button class="btn btn-outline-primary mb-3" onclick="readCoordinates()">๐ ูุฑุงุกุฉ ุงูุฅุญุฏุงุซูุงุช</button>
                        <button class="btn btn-outline-primary mb-3" onclick="sendListP('-1')">๐ LISTP - ุงูุณุงุจู</button>
                        <button class="btn btn-outline-primary mb-3" onclick="sendListP('+1')">๐ LISTP + ุงูุชุงูู</button>
                        <pre id="coordinates-display" class="border rounded p-2 bg-light"></pre>

                    </div>
                    <div class="input-group">
                        <input class="form-control" id="coord-waist" placeholder="X" type="number">
                        <input class="form-control" id="coord-shoulder" placeholder="Y" type="number">
                        <input class="form-control" id="coord-elbow" placeholder="Z" type="number">
                        <input class="form-control" id="coord-pitch" placeholder="A" type="number">
                        <input class="form-control" id="coord-roll" placeholder="B" type="number">
                        <input class="form-control" id="coord-c" placeholder="c" type="number">

                    </div>
                </div>
            </div>
        </div>


        <div class="d-flex gap-2 mb-4">
            <div class="d-flex gap-2 mt-3">
                    <button class="btn btn-success btn-lg px-4" onclick="sendMixedMove('ABS')">
                        ๐ ุชุญุฑูู ูุทูู (PCOSIROP)
                    </button>
                    <button class="btn btn-warning btn-lg px-4" onclick="sendMixedMove('REL')">
                        ๐ฏ ุชุญุฑูู ูุณุจู (JCOSIROP)
                    </button>
                    <button class="btn btn-outline-success" onclick="resetArmAlarm()">ุฅุนุงุฏุฉ ุถุจุท ุงูุฅูุฐุงุฑ</button>
                </div>
        </div>
    </div>

   <!-- ูุฑุช ุฅุฑุณุงู ููุฏ ุตุบูุฑ ูุงุณุชูุจุงู ุงูุฑุฏ -->
    <div class="row g-4 mt-4">
    <div class="col-lg-12">
        <div class="card shadow">
        <div class="card-body">
            <h5 class="card-title">๐ค ุฅุฑุณุงู ููุฏ ุตุบูุฑ ูุงุณุชูุจุงู ุงูุฑุฏ</h5>

            <!-- ุฅุฏุฎุงู ุงูููุฏ ูุฒุฑ ุงูุฅุฑุณุงู -->
            <div class="input-group mb-3">
            <input type="text" class="form-control" id="custom-code-input" placeholder="ูุซุงู: 1;1;STATE">
            <button class="btn btn-primary" onclick="sendCustomCode()">ุฅุฑุณุงู</button>
            </div>

            <!-- ุนุฑุถ ุงูุฑุฏ -->
            <label class="form-label">๐ฅ ุงูุฑุฏ:</label>
            <pre id="custom-code-response" class="form-control bg-light" style="height: 150px; overflow-y: auto;"></pre>
        </div>
        </div>
    </div>
    </div>


</div>

<script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
